# This file is part of helpers4.
# Copyright (C) 2026 helpers4
# SPDX-License-Identifier: AGPL-3.0-or-later
name: Conventional Commits Check
description: Validate commit messages against the Conventional Commits specification
author: helpers4
branding:
  icon: check-circle
  color: blue
inputs:
  checkout:
    description: Run actions/checkout with fetch-depth 0 before validation
    required: false
    default: "true"
  base-sha:
    description: Base commit SHA to compare against (optional if running on push or pull_request)
    required: false
    default: ""
  head-sha:
    description: Head commit SHA to validate (optional if running on push or pull_request)
    required: false
    default: ""
  pr-comment:
    description: Comment on PR with validation results (none, error, success, both)
    required: false
    default: "error"
runs:
  using: composite
  steps:
    - name: Checkout
      if: ${{ inputs.checkout == 'true' }}
      uses: actions/checkout@v4
      with:
        fetch-depth: 0
    - name: Validate commit messages
      shell: bash
      run: |
        "${{ github.action_path }}/scripts/validate.sh" "${{ inputs.base-sha }}" "${{ inputs.head-sha }}" "${{ inputs.pr-comment }}"
